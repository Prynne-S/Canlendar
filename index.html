<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åŠ¨æ€æ—¥å†</title>
<style>
  body {
    margin: 0;
    font-family: "Segoe UI", "Helvetica Neue", sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #ffffff;
  }

  .calendar-widget {
    display: flex;
    flex-direction: row;
    border-radius: 12px;
    padding: 8px;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    width: fit-content; /* ğŸš€ åªåŒ…è£¹å†…å®¹ï¼Œé¿å…è¢«æ’‘å¤§ */
  }

  /* å·¦ä¾§é¢æ¿ */
  .left {
    flex: none;
    width: 120px;
    text-align: center;
    padding: 8px;
    background: #f0f0f0;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }

  .left .year-month {
    font-size: 20px;
    font-weight: bold;
    color: #000;
    margin: -4px 0 2px 0;
    font-family: "Segoe UI", "Helvetica Neue", sans-serif;
  }

  .left .big-date {
    font-size: 50px;
    font-weight: bold;
    color: #000;
    margin: 10px 0;
    font-family: "Times New Roman", serif;
  }

  .left .lunar-week,
  .left .day-week {
    font-size: 14px;
    color: #666;
    margin: 4px 0;
    font-family: "Segoe UI", "Helvetica Neue", sans-serif;
  }

  /* å³ä¾§æ—¥å† */
  .right {
    flex: none; /* âŒ ä¸è¦è‡ªåŠ¨å æ»¡ */
    padding-left: 6px;
    padding-top: 8px;
    padding-bottom: 4px;
  }

  .calendar {
    display: inline-grid;    
    grid-template-columns: repeat(7, 24px); /* æ¯åˆ—å›ºå®šå®½åº¦ */
    gap: 3.5px; /* ç´§å‡‘çš„é—´è· */
  }

  .calendar div {
    text-align: center;
    border-radius: 50%;
    font-family: "Times New Roman", serif;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 12px;
    width: 24px;
    height: 24px;
  }

  .calendar .header {
    font-weight: bold;
    font-family: "æ¥·ä½“", "SimKai", "KaiTi", serif;
    color: #333;
    border-radius: 0;
    font-size: 12px;
  }

  .calendar .today {
    background: #000;
    color: #fff;
    font-weight: bold;
    border-radius: 50%;
  }

  @media (max-width: 500px) {
    .calendar-widget {
      flex-direction: column;
      align-items: center;
    }
    .left {
      margin-bottom: 8px;
      width: 80%;
    }
    .right {
      padding-left: 0;
    }
  }
</style>
</head>
<body>
<div class="calendar-widget">
  <div class="left">
    <div class="year-month" id="year-month"></div>
    <div class="big-date" id="big-date"></div>
    <div class="lunar-week" id="lunar-week"></div>
    <div class="day-week" id="day-week"></div>
  </div>
  <div class="right">
    <div class="calendar" id="calendar"></div>
  </div>
</div>

<!-- å¼•å…¥ lunar-javascript ç²¾ç¡®å†œå†åº“ -->
<script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
<script>
const today = new Date();
const monthNames = ["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"];
const weekNames = ["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"];

// ç²¾ç¡®å†œå†
function getLunarDate(date){
  const lunar = Lunar.fromDate(date);
  const lunarMonth = lunar.getMonthInChinese() + "æœˆ";
  const lunarDay = lunar.getDayInChinese();
  return lunarMonth + lunarDay;
}

// ç¬¬ n å¤©
function getDayNumber(date){
  const start=new Date(2025,8,1);
  const diff=Math.floor((date-start)/(1000*60*60*24))+1;
  return diff>0?diff:1;
}

// ç¬¬ n å‘¨
function getWeekNumber(date){
  const start=new Date(2025,8,7);
  const diffDays=Math.floor((date-start)/(1000*60*60*24));
  return diffDays>=0?Math.floor(diffDays/7)+1:1;
}

// å·¦é¢æ¿æ˜¾ç¤º
document.getElementById("year-month").textContent = today.getFullYear()+"å¹´"+monthNames[today.getMonth()];
document.getElementById("big-date").textContent = today.getDate();
document.getElementById("lunar-week").textContent = getLunarDate(today)+"  "+weekNames[today.getDay()];
document.getElementById("day-week").textContent = "ç¬¬"+getDayNumber(today)+"å¤© ç¬¬"+getWeekNumber(today)+"å‘¨";

// å³æ—¥å†ç”Ÿæˆ
function generateCalendar(year, month){
  const calendar=document.getElementById("calendar");
  calendar.innerHTML="";

  const weekHeader=["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"];
  for(let w of weekHeader){
    const div=document.createElement("div");
    div.textContent=w;
    div.className="header";
    calendar.appendChild(div);
  }

  const firstDay=new Date(year,month,1).getDay();
  const daysInMonth=new Date(year,month+1,0).getDate();

  for(let i=0;i<firstDay;i++){
    const div=document.createElement("div");
    div.textContent="";
    calendar.appendChild(div);
  }

  for(let d=1;d<=daysInMonth;d++){
    const div=document.createElement("div");
    div.textContent=d;
    if(d===today.getDate() && month===today.getMonth() && year===today.getFullYear()){
      div.classList.add("today");
    }
    calendar.appendChild(div);
  }
}

generateCalendar(today.getFullYear(), today.getMonth());
</script>
</body>
</html>
